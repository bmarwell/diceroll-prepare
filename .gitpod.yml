# This configuration file was automatically generated by Gitpod.
# Please adjust to your needs (see https://www.gitpod.io/docs/introduction/learn-gitpod/gitpod-yaml)
# and commit this file to your remote git repository to share the goodness with others.

# Learn more from ready-to-use templates: https://www.gitpod.io/docs/introduction/getting-started/quickstart

tasks:
  - name: init JDK
    init: |
      sed -i -e 's/sdkman_auto_answer=false/sdkman_auto_answer=true/g' $HOME/.sdkman/etc/config
      . /home/gitpod/.sdkman/bin/sdkman-init.sh
      sdk update
      sdk install java 17.0.5-sem
      sdk use java 17.0.5-sem
      sdk default java 17.0.5-sem
      gp sync-done jdk

  - name: start backend dev server
    init: gp sync-await jdk
    command: |
      sdk use java 17.0.5-sem
      mvn liberty:dev -am -pl rest

  - name: start frontend dev server  
    init: gp sync-await jdk
    command: |
      cd frontend/src/main/dicerollparser
      npm install && npm run dev


